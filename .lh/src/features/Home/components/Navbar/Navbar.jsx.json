{
    "sourceFile": "src/features/Home/components/Navbar/Navbar.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1761556205766,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1761556412131,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,9 @@\n import { useEffect, useRef, useState } from \"react\";\r\n import { Link } from \"react-router-dom\";\r\n import { gsap } from \"gsap\";\r\n+import { Sun, Moon } from \"lucide-react\";\r\n+import { useTheme } from \"../../../../context/ThemeContext\";\r\n import \"./Navbar.css\";\r\n \r\n const Navbar = ({\r\n   logo,\r\n@@ -13,8 +15,9 @@\n   onMobileMenuClick,\r\n   initialLoadAnimation = true,\r\n }) => {\r\n   const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\r\n+  const { toggleTheme, isDark } = useTheme();\r\n   const circleRefs = useRef([]);\r\n   const tlRefs = useRef([]);\r\n   const activeTweenRefs = useRef([]);\r\n   const logoImgRef = useRef(null);\r\n@@ -225,34 +228,27 @@\n \r\n   return (\r\n     <div className=\"pill-nav-container\">\r\n       <nav className={`pill-nav ${className}`} aria-label=\"Primary\">\r\n-        {isRouterLink(items?.[0]?.href) ? (\r\n-          <Link\r\n-            className=\"pill-logo\"\r\n-            to={items[0].href}\r\n-            aria-label=\"Home\"\r\n-            onMouseEnter={handleLogoEnter}\r\n-            role=\"menuitem\"\r\n-            ref={(el) => {\r\n-              logoRef.current = el;\r\n-            }}\r\n-          >\r\n-            <img src={logo} alt={logoAlt} ref={logoImgRef} />\r\n-          </Link>\r\n-        ) : (\r\n-          <a\r\n-            className=\"pill-logo\"\r\n-            href={items?.[0]?.href || \"#\"}\r\n-            aria-label=\"Home\"\r\n-            onMouseEnter={handleLogoEnter}\r\n-            ref={(el) => {\r\n-              logoRef.current = el;\r\n-            }}\r\n-          >\r\n-            <img src={logo} alt={logoAlt} ref={logoImgRef} />\r\n-          </a>\r\n-        )}\r\n+        <button\r\n+          className=\"pill-logo theme-toggle-logo\"\r\n+          onClick={handleLogoClick}\r\n+          onMouseEnter={handleLogoEnter}\r\n+          onMouseLeave={handleLogoLeave}\r\n+          aria-label={`Switch to ${isDark ? 'light' : 'dark'} mode`}\r\n+          title={`Switch to ${isDark ? 'light' : 'dark'} mode`}\r\n+          ref={(el) => {\r\n+            logoRef.current = el;\r\n+          }}\r\n+        >\r\n+          <div className=\"theme-icon-wrapper\" ref={logoImgRef}>\r\n+            {isDark ? (\r\n+              <Sun size={24} strokeWidth={2.5} className=\"theme-icon sun-icon\" />\r\n+            ) : (\r\n+              <Moon size={24} strokeWidth={2.5} className=\"theme-icon moon-icon\" />\r\n+            )}\r\n+          </div>\r\n+        </button>\r\n \r\n         <div className=\"pill-nav-items desktop-only\" ref={navItemsRef}>\r\n           <ul className=\"pill-list\" role=\"menubar\">\r\n             {items.map((item, i) => (\r\n"
                }
            ],
            "date": 1761556205766,
            "name": "Commit-0",
            "content": "import { useEffect, useRef, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { gsap } from \"gsap\";\r\nimport \"./Navbar.css\";\r\n\r\nconst Navbar = ({\r\n  logo,\r\n  logoAlt = \"Logo\",\r\n  items,\r\n  activeHref,\r\n  className = \"\",\r\n  ease = \"power3.easeOut\",\r\n  onMobileMenuClick,\r\n  initialLoadAnimation = true,\r\n}) => {\r\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\r\n  const circleRefs = useRef([]);\r\n  const tlRefs = useRef([]);\r\n  const activeTweenRefs = useRef([]);\r\n  const logoImgRef = useRef(null);\r\n  const logoTweenRef = useRef(null);\r\n  const hamburgerRef = useRef(null);\r\n  const mobileMenuRef = useRef(null);\r\n  const navItemsRef = useRef(null);\r\n  const logoRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const layout = () => {\r\n      circleRefs.current.forEach((circle) => {\r\n        if (!circle?.parentElement) return;\r\n\r\n        const pill = circle.parentElement;\r\n        const rect = pill.getBoundingClientRect();\r\n        const { width: w, height: h } = rect;\r\n        const R = ((w * w) / 4 + h * h) / (2 * h);\r\n        const D = Math.ceil(2 * R) + 2;\r\n        const delta =\r\n          Math.ceil(R - Math.sqrt(Math.max(0, R * R - (w * w) / 4))) + 1;\r\n        const originY = D - delta;\r\n\r\n        circle.style.width = `${D}px`;\r\n        circle.style.height = `${D}px`;\r\n        circle.style.bottom = `-${delta}px`;\r\n\r\n        gsap.set(circle, {\r\n          xPercent: -50,\r\n          scale: 0,\r\n          transformOrigin: `50% ${originY}px`,\r\n        });\r\n\r\n        const label = pill.querySelector(\".pill-label\");\r\n        const white = pill.querySelector(\".pill-label-hover\");\r\n\r\n        if (label) gsap.set(label, { y: 0 });\r\n        if (white) gsap.set(white, { y: h + 12, opacity: 0 });\r\n\r\n        const index = circleRefs.current.indexOf(circle);\r\n        if (index === -1) return;\r\n\r\n        tlRefs.current[index]?.kill();\r\n        const tl = gsap.timeline({ paused: true });\r\n\r\n        tl.to(\r\n          circle,\r\n          { scale: 1.2, xPercent: -50, duration: 2, ease, overwrite: \"auto\" },\r\n          0\r\n        );\r\n\r\n        if (label) {\r\n          tl.to(\r\n            label,\r\n            { y: -(h + 8), duration: 2, ease, overwrite: \"auto\" },\r\n            0\r\n          );\r\n        }\r\n\r\n        if (white) {\r\n          gsap.set(white, { y: Math.ceil(h + 100), opacity: 0 });\r\n          tl.to(\r\n            white,\r\n            { y: 0, opacity: 1, duration: 2, ease, overwrite: \"auto\" },\r\n            0\r\n          );\r\n        }\r\n\r\n        tlRefs.current[index] = tl;\r\n      });\r\n    };\r\n\r\n    layout();\r\n\r\n    const onResize = () => layout();\r\n    window.addEventListener(\"resize\", onResize);\r\n\r\n    if (document.fonts?.ready) {\r\n      document.fonts.ready.then(layout).catch(() => {});\r\n    }\r\n\r\n    const menu = mobileMenuRef.current;\r\n    if (menu) {\r\n      gsap.set(menu, { visibility: \"hidden\", opacity: 0, scaleY: 1 });\r\n    }\r\n\r\n    if (initialLoadAnimation) {\r\n      const logo = logoRef.current;\r\n      const navItems = navItemsRef.current;\r\n\r\n      if (logo) {\r\n        gsap.set(logo, { scale: 0 });\r\n        gsap.to(logo, {\r\n          scale: 1,\r\n          duration: 0.6,\r\n          ease,\r\n        });\r\n      }\r\n\r\n      if (navItems) {\r\n        gsap.set(navItems, { width: 0, overflow: \"hidden\" });\r\n        gsap.to(navItems, {\r\n          width: \"auto\",\r\n          duration: 0.6,\r\n          ease,\r\n        });\r\n      }\r\n    }\r\n\r\n    return () => window.removeEventListener(\"resize\", onResize);\r\n  }, [items, ease, initialLoadAnimation]);\r\n\r\n  const handleEnter = (i) => {\r\n    const tl = tlRefs.current[i];\r\n    if (!tl) return;\r\n    activeTweenRefs.current[i]?.kill();\r\n    activeTweenRefs.current[i] = tl.tweenTo(tl.duration(), {\r\n      duration: 0.3,\r\n      ease,\r\n      overwrite: \"auto\",\r\n    });\r\n  };\r\n\r\n  const handleLeave = (i) => {\r\n    const tl = tlRefs.current[i];\r\n    if (!tl) return;\r\n    activeTweenRefs.current[i]?.kill();\r\n    activeTweenRefs.current[i] = tl.tweenTo(0, {\r\n      duration: 0.2,\r\n      ease,\r\n      overwrite: \"auto\",\r\n    });\r\n  };\r\n\r\n  const handleLogoEnter = () => {\r\n    const img = logoImgRef.current;\r\n    if (!img) return;\r\n    logoTweenRef.current?.kill();\r\n    gsap.set(img, { rotate: 0 });\r\n    logoTweenRef.current = gsap.to(img, {\r\n      rotate: 360,\r\n      duration: 0.2,\r\n      ease,\r\n      overwrite: \"auto\",\r\n    });\r\n  };\r\n\r\n  const toggleMobileMenu = () => {\r\n    const newState = !isMobileMenuOpen;\r\n    setIsMobileMenuOpen(newState);\r\n\r\n    const hamburger = hamburgerRef.current;\r\n    const menu = mobileMenuRef.current;\r\n\r\n    if (hamburger) {\r\n      const lines = hamburger.querySelectorAll(\".hamburger-line\");\r\n      if (newState) {\r\n        gsap.to(lines[0], { rotation: 45, y: 3, duration: 0.3, ease });\r\n        gsap.to(lines[1], { rotation: -45, y: -3, duration: 0.3, ease });\r\n      } else {\r\n        gsap.to(lines[0], { rotation: 0, y: 0, duration: 0.3, ease });\r\n        gsap.to(lines[1], { rotation: 0, y: 0, duration: 0.3, ease });\r\n      }\r\n    }\r\n\r\n    if (menu) {\r\n      if (newState) {\r\n        gsap.set(menu, { visibility: \"visible\" });\r\n        gsap.fromTo(\r\n          menu,\r\n          { opacity: 0, y: 10, scaleY: 1 },\r\n          {\r\n            opacity: 1,\r\n            y: 0,\r\n            scaleY: 1,\r\n            duration: 0.3,\r\n            ease,\r\n            transformOrigin: \"top center\",\r\n          }\r\n        );\r\n      } else {\r\n        gsap.to(menu, {\r\n          opacity: 0,\r\n          y: 10,\r\n          scaleY: 1,\r\n          duration: 0.2,\r\n          ease,\r\n          transformOrigin: \"top center\",\r\n          onComplete: () => {\r\n            gsap.set(menu, { visibility: \"hidden\" });\r\n          },\r\n        });\r\n      }\r\n    }\r\n\r\n    onMobileMenuClick?.();\r\n  };\r\n\r\n  const isExternalLink = (href) =>\r\n    href.startsWith(\"http://\") ||\r\n    href.startsWith(\"https://\") ||\r\n    href.startsWith(\"//\") ||\r\n    href.startsWith(\"mailto:\") ||\r\n    href.startsWith(\"tel:\") ||\r\n    href.startsWith(\"#\");\r\n\r\n  const isRouterLink = (href) => href && !isExternalLink(href);\r\n\r\n  return (\r\n    <div className=\"pill-nav-container\">\r\n      <nav className={`pill-nav ${className}`} aria-label=\"Primary\">\r\n        {isRouterLink(items?.[0]?.href) ? (\r\n          <Link\r\n            className=\"pill-logo\"\r\n            to={items[0].href}\r\n            aria-label=\"Home\"\r\n            onMouseEnter={handleLogoEnter}\r\n            role=\"menuitem\"\r\n            ref={(el) => {\r\n              logoRef.current = el;\r\n            }}\r\n          >\r\n            <img src={logo} alt={logoAlt} ref={logoImgRef} />\r\n          </Link>\r\n        ) : (\r\n          <a\r\n            className=\"pill-logo\"\r\n            href={items?.[0]?.href || \"#\"}\r\n            aria-label=\"Home\"\r\n            onMouseEnter={handleLogoEnter}\r\n            ref={(el) => {\r\n              logoRef.current = el;\r\n            }}\r\n          >\r\n            <img src={logo} alt={logoAlt} ref={logoImgRef} />\r\n          </a>\r\n        )}\r\n\r\n        <div className=\"pill-nav-items desktop-only\" ref={navItemsRef}>\r\n          <ul className=\"pill-list\" role=\"menubar\">\r\n            {items.map((item, i) => (\r\n              <li key={item.href || `item-${i}`} role=\"none\">\r\n                {isRouterLink(item.href) ? (\r\n                  <Link\r\n                    role=\"menuitem\"\r\n                    to={item.href}\r\n                    className={`pill${\r\n                      activeHref === item.href ? \" is-active\" : \"\"\r\n                    }`}\r\n                    aria-label={item.ariaLabel || item.label}\r\n                    onMouseEnter={() => handleEnter(i)}\r\n                    onMouseLeave={() => handleLeave(i)}\r\n                  >\r\n                    <span\r\n                      className=\"hover-circle\"\r\n                      aria-hidden=\"true\"\r\n                      ref={(el) => {\r\n                        circleRefs.current[i] = el;\r\n                      }}\r\n                    />\r\n                    <span className=\"label-stack\">\r\n                      <span className=\"pill-label\">{item.label}</span>\r\n                      <span className=\"pill-label-hover\" aria-hidden=\"true\">\r\n                        {item.label}\r\n                      </span>\r\n                    </span>\r\n                  </Link>\r\n                ) : (\r\n                  <a\r\n                    role=\"menuitem\"\r\n                    href={item.href}\r\n                    className={`pill${\r\n                      activeHref === item.href ? \" is-active\" : \"\"\r\n                    }`}\r\n                    aria-label={item.ariaLabel || item.label}\r\n                    onMouseEnter={() => handleEnter(i)}\r\n                    onMouseLeave={() => handleLeave(i)}\r\n                  >\r\n                    <span\r\n                      className=\"hover-circle\"\r\n                      aria-hidden=\"true\"\r\n                      ref={(el) => {\r\n                        circleRefs.current[i] = el;\r\n                      }}\r\n                    />\r\n                    <span className=\"label-stack\">\r\n                      <span className=\"pill-label\">{item.label}</span>\r\n                      <span className=\"pill-label-hover\" aria-hidden=\"true\">\r\n                        {item.label}\r\n                      </span>\r\n                    </span>\r\n                  </a>\r\n                )}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n\r\n        <button\r\n          className=\"mobile-menu-button mobile-only\"\r\n          onClick={toggleMobileMenu}\r\n          aria-label=\"Toggle menu\"\r\n          ref={hamburgerRef}\r\n        >\r\n          <span className=\"hamburger-line\" />\r\n          <span className=\"hamburger-line\" />\r\n        </button>\r\n      </nav>\r\n\r\n      <div className=\"mobile-menu-popover mobile-only\" ref={mobileMenuRef}>\r\n        <ul className=\"mobile-menu-list\">\r\n          {items.map((item, i) => (\r\n            <li key={item.href || `mobile-item-${i}`}>\r\n              {isRouterLink(item.href) ? (\r\n                <Link\r\n                  to={item.href}\r\n                  className={`mobile-menu-link${\r\n                    activeHref === item.href ? \" is-active\" : \"\"\r\n                  }`}\r\n                  onClick={() => setIsMobileMenuOpen(false)}\r\n                >\r\n                  {item.label}\r\n                </Link>\r\n              ) : (\r\n                <a\r\n                  href={item.href}\r\n                  className={`mobile-menu-link${\r\n                    activeHref === item.href ? \" is-active\" : \"\"\r\n                  }`}\r\n                  onClick={() => setIsMobileMenuOpen(false)}\r\n                >\r\n                  {item.label}\r\n                </a>\r\n              )}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n"
        }
    ]
}